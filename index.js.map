{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport default async function getImagesByQuery(query, page = 1) {\n  return await axios\n    .get('/api/', {\n      params: {\n        key: '51813911-adef45491f9b881200172b027',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: 15,\n      },\n    })\n    .then(res => {\n      return res.data;\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryElem = document.querySelector('.gallery');\nconst loaderElem = document.querySelector('.loader');\nconst loadBtnElem = document.querySelector('.js-load-bt');\n\nexport function createGallery(images) {\n  const markup = templatePictures(images);\n  galleryElem.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\n\nfunction templatePictures(posts) {\n  return posts.map(templatePicture).join('');\n}\n\nfunction templatePicture(\n  { likes, views, comments, downloads, largeImageURL, webformatURL, tags },\n  i\n) {\n  return `<li class=\"gallery-item\"><a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"image-item\" src=\"${webformatURL}\" alt=\"${tags}\" /></a>\n          <div class=\"text-item\">\n            <div class=\"single-text\">\n              <h5>Likes</h5>\n              <p>${likes}</p>\n            </div>\n            <div class=\"single-text\">\n              <h5>Views</h5>\n              <p>${views}</p>\n            </div>\n            <div class=\"single-text\">\n              <h5>Comments</h5>\n              <p>${comments}</p>\n            </div>\n            <div class=\"single-text\">\n              <h5>Downloads</h5>\n              <p>${downloads}</p>\n            </div>\n          </div>\n        </li>`;\n}\nlet gallery = new SimpleLightbox('.gallery-link', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function clearGallery() {\n  galleryElem.innerHTML = '';\n}\n\nexport function showLoader() {\n  loaderElem.style.display = 'flex';\n}\n\nexport function hideLoader() {\n  loaderElem.style.display = 'none';\n}\nexport function showLoadMoreButton() {\n  loadBtnElem.classList.remove('hide');\n}\nexport function hideLoadMoreButton() {\n  loadBtnElem.classList.add('hide');\n}\n","import getImagesByQuery from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst formElem = document.querySelector('.js-form');\nconst loadBtnElem = document.querySelector('.js-load-bt');\n\nlet page = 1;\nlet searchText = '';\nlet totalPages = 0;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  hideLoader();\n  hideLoadMoreButton();\n});\n\nformElem.addEventListener('submit', async e => {\n  e.preventDefault();\n  page = 1;\n  hideLoadMoreButton();\n\n  const inputElem = e.currentTarget.elements['search-text'];\n  const value = inputElem.value.trim();\n\n  if (value === '') {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search term before submitting.',\n    });\n    return;\n  }\n\n  searchText = value;\n  clearGallery();\n  showLoader();\n\n  try {\n    const images = await getImagesByQuery(searchText, page);\n    hideLoader();\n\n    if (images.hits.length > 0) {\n      totalPages = Math.ceil(images.totalHits / 15);\n      createGallery(images.hits);\n\n      if (totalPages > 1) {\n        showLoadMoreButton();\n      } else {\n        iziToast.info({\n          title: 'Message',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    } else {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n    console.error(error);\n  } finally {\n    inputElem.value = '';\n  }\n});\n\nloadBtnElem.addEventListener('click', async () => {\n  page += 1;\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const images = await getImagesByQuery(searchText, page);\n    hideLoader();\n\n    if (images.hits.length > 0) {\n      createGallery(images.hits);\n\n      const galleryCard = document.querySelector('.gallery-item');\n      if (galleryCard) {\n        const { height: cardHeight } = galleryCard.getBoundingClientRect();\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: 'smooth',\n        });\n      }\n\n      if (page < totalPages) {\n        showLoadMoreButton();\n      } else {\n        iziToast.info({\n          title: 'Message',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    } else {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n    console.error(error);\n  }\n});\n"],"names":["axios","getImagesByQuery","query","page","res","error","galleryElem","loaderElem","loadBtnElem","createGallery","images","markup","templatePictures","gallery","posts","templatePicture","likes","views","comments","downloads","largeImageURL","webformatURL","tags","i","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","formElem","searchText","totalPages","e","inputElem","value","iziToast","galleryCard","cardHeight"],"mappings":"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"}